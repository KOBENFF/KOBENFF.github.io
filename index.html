<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>IP Logger</title>
</head>
<body>
    <h1>กำลังประมวลผล...</h1>
    
    <script>
        async function logIPToGitHub() {
            try {
                // ดักจับ IP
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                
                // เก็บข้อมูลเพิ่มเติม
                const visitorInfo = {
                    ip: ipData.ip,
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent,
                    language: navigator.language,
                    platform: navigator.platform,
                    referrer: document.referrer
                };
                
                // สร้างข้อมูลสำหรับ GitHub Gist
                const gistData = {
                    description: "Visitor IP Log",
                    public: false,
                    files: {
                        [`visitor_${Date.now()}.json`]: {
                            content: JSON.stringify(visitorInfo, null, 2)
                        }
                    }
                };
                
                // หมายเหตุ: ในทางปฏิบัติคุณต้องมี GitHub Personal Access Token
                // และเก็บไว้อย่างปลอดภัย (ไม่ควรใส่ใน client-side code)
                
                console.log('Visitor Info:', visitorInfo);
                
                // แสดงข้อมูล
                document.body.innerHTML = `
                    <h1>ข้อมูลการเข้าชม</h1>
                    <div style="text-align: left; max-width: 500px; margin: 0 auto;">
                        <p><strong>IP Address:</strong> ${visitorInfo.ip}</p>
                        <p><strong>เวลา:</strong> ${new Date(visitorInfo.timestamp).toLocaleString('th-TH')}</p>
                        <p><strong>เบราว์เซอร์:</strong> ${visitorInfo.userAgent}</p>
                    </div>
                `;
                
            } catch (error) {
                console.error('Error:', error);
                document.body.innerHTML = '<h1>เกิดข้อผิดพลาด</h1>';
            }
        }
        
        // รันฟังก์ชัน
        logIPToGitHub();
    </script>
</body>
</html>
